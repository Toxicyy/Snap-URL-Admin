(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{33365:function(e,t,a){Promise.resolve().then(a.bind(a,31324))},31047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(39763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},65302:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(39763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},91723:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(39763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},45131:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(39763).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},31324:function(e,t,a){"use strict";var s=a(85583),r=a(1780),n=a(57437),l=a(2265),c=a(60429),i=a(5095),d=a(91723),o=a(65302),x=a(45131),m=a(22252),h=a(99397),p=a(48736),y=a(31047),u=a(92735),g=a(18930),j=a(46221),b=a(82431),v=a(6545),f=a(12025),N=a(71837),k=a(97587);t.default=()=>{let{theme:e}=(0,f.Fg)(),[t,a]=(0,l.useState)(!1),[w,C]=(0,l.useState)(null),[D,Z]=(0,l.useState)(!1),[R,E]=(0,l.useState)([]),[S,_]=(0,l.useState)({type:"user",startDate:new Date(Date.now()-2592e6).toISOString().substring(0,10),endDate:new Date().toISOString().substring(0,10),format:"json",includeCharts:!1}),U=async()=>{try{a(!0),C(null);let e=await N.ZP.analytics.generateReport(S);if(e.success&&e.data){let t;let a={id:"report-".concat(Date.now()),name:"".concat(S.type," Report - ").concat(new Date().toLocaleDateString()),type:S.type,format:S.format,status:"completed",createdAt:new Date().toISOString(),metadata:e.data.metadata};t="csv"===S.format?"object"==typeof e.data.data?JSON.stringify(e.data.data):e.data.data:JSON.stringify(e.data.data,null,2);let s=new Blob([t],{type:"csv"===S.format?"text/csv":"application/json"});a.downloadUrl=URL.createObjectURL(s),E(e=>[a,...e]),Z(!1)}else throw Error(e.message||"Failed to generate report")}catch(e){console.error("Error generating report:",e),C(e instanceof Error?e.message:"Failed to generate report")}finally{a(!1)}},O=e=>{if(e.downloadUrl){let t=document.createElement("a");t.href=e.downloadUrl,t.download="".concat(e.name.replace(/\s+/g,"_"),".").concat(e.format),document.body.appendChild(t),t.click(),document.body.removeChild(t)}},F=e=>{E(t=>{let a=t.find(t=>t.id===e);return(null==a?void 0:a.downloadUrl)&&URL.revokeObjectURL(a.downloadUrl),t.filter(t=>t.id!==e)})},G=e=>{switch(e){case"generating":return(0,n.jsx)(d.Z,{className:"w-4 h-4 text-yellow-500 animate-spin"});case"completed":return(0,n.jsx)(o.Z,{className:"w-4 h-4 text-green-500"});case"failed":return(0,n.jsx)(x.Z,{className:"w-4 h-4 text-red-500"});default:return(0,n.jsx)(d.Z,{className:"w-4 h-4 text-gray-400"})}},L=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,n.jsx)(c.E.div,{variants:{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}},initial:"initial",animate:"animate",exit:"exit",transition:{duration:.3},children:(0,n.jsxs)(v.Z,{title:"Analytics Reports",description:"Generate and download comprehensive analytics reports",children:[(0,n.jsx)(i.M,{children:w&&(0,n.jsxs)(c.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(m.Z,{className:"w-5 h-5 text-red-500"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-red-700 dark:text-red-400 text-sm font-medium",children:"Report Generation Failed"}),(0,n.jsx)("p",{className:"text-red-600 dark:text-red-500 text-xs",children:w})]})]}),(0,n.jsx)("button",{onClick:()=>C(null),className:"mt-2 text-red-600 dark:text-red-400 text-sm hover:text-red-700 dark:hover:text-red-300 underline",children:"Dismiss"})]})}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Z(!0),className:"btn-primary px-4 py-2 rounded-lg flex items-center space-x-2",disabled:t,children:[(0,n.jsx)(h.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Generate Report"})]})}),(0,n.jsx)("div",{className:"flex items-center space-x-3",children:(0,n.jsxs)("span",{className:"text-sm ".concat("dark"===e?"text-gray-400":"text-gray-600"),children:[R.length," reports generated"]})})]}),(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsx)(k.t,{title:"Generated Reports",theme:e,children:R.length>0?(0,n.jsx)("div",{className:"space-y-4",children:R.map((t,a)=>{var s;return(0,n.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"p-4 rounded-lg border ".concat("dark"===e?"bg-gray-750 border-gray-700":"bg-gray-50 border-gray-200"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"p-2 rounded-lg ".concat("dark"===e?"bg-blue-900/20":"bg-blue-100"),children:(0,n.jsx)(p.Z,{className:"w-5 h-5 text-blue-500"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("h3",{className:"font-medium ".concat("dark"===e?"text-white":"text-gray-900"),children:t.name}),G(t.status)]}),(0,n.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[(0,n.jsxs)("span",{className:"text-sm ".concat("dark"===e?"text-gray-400":"text-gray-500"),children:["Type: ",t.type]}),(0,n.jsxs)("span",{className:"text-sm ".concat("dark"===e?"text-gray-400":"text-gray-500"),children:["Format: ",t.format.toUpperCase()]}),(0,n.jsx)("span",{className:"text-sm ".concat("dark"===e?"text-gray-400":"text-gray-500"),children:L(t.createdAt)})]}),(null===(s=t.metadata)||void 0===s?void 0:s.dateRange)&&(0,n.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,n.jsx)(y.Z,{className:"w-3 h-3 text-gray-400"}),(0,n.jsxs)("span",{className:"text-xs ".concat("dark"===e?"text-gray-500":"text-gray-400"),children:[new Date(t.metadata.dateRange.startDate).toLocaleDateString()," ","-"," ",new Date(t.metadata.dateRange.endDate).toLocaleDateString()]})]})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:["completed"===t.status&&(0,n.jsx)(c.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(t),className:"p-2 rounded-lg transition-colors ".concat("dark"===e?"hover:bg-gray-700 text-gray-400":"hover:bg-gray-100 text-gray-600"),title:"Download Report",children:(0,n.jsx)(u.Z,{className:"w-4 h-4"})}),(0,n.jsx)(c.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>F(t.id),className:"p-2 rounded-lg transition-colors text-red-500 ".concat("dark"===e?"hover:bg-red-900/20":"hover:bg-red-50"),title:"Delete Report",children:(0,n.jsx)(g.Z,{className:"w-4 h-4"})})]})]}),t.error&&(0,n.jsxs)("div",{className:"mt-3 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-sm text-red-600 dark:text-red-400",children:["Error: ",t.error]})]},t.id)})}):(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(j.Z,{className:"w-16 h-16 mx-auto mb-4 ".concat("dark"===e?"text-gray-600":"text-gray-400")}),(0,n.jsx)("h3",{className:"text-lg font-medium mb-2 ".concat("dark"===e?"text-gray-300":"text-gray-700"),children:"No Reports Generated"}),(0,n.jsx)("p",{className:"text-sm mb-4 ".concat("dark"===e?"text-gray-400":"text-gray-600"),children:"Create your first analytics report to get started"}),(0,n.jsxs)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Z(!0),className:"btn-primary px-4 py-2 rounded-lg flex items-center space-x-2 mx-auto",children:[(0,n.jsx)(h.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Generate First Report"})]})]})})}),(0,n.jsx)(i.M,{children:D&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,n.jsxs)(c.E.div,{variants:{hidden:{opacity:0,scale:.9,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.9,y:20,transition:{duration:.2}}},initial:"hidden",animate:"visible",exit:"exit",className:"w-full max-w-lg rounded-lg shadow-xl ".concat("dark"===e?"bg-gray-800":"bg-white"," max-h-[90vh] overflow-y-auto"),onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-6 border-b ".concat("dark"===e?"border-gray-700":"border-gray-200"),children:[(0,n.jsx)("h2",{className:"text-xl font-semibold ".concat("dark"===e?"text-white":"text-gray-900"),children:"Generate Analytics Report"}),(0,n.jsx)(c.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>Z(!1),className:"p-1 rounded-lg ".concat("dark"===e?"hover:bg-gray-700":"hover:bg-gray-100"),children:(0,n.jsx)(x.Z,{className:"w-5 h-5"})})]}),(0,n.jsxs)("div",{className:"p-6 space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat("dark"===e?"text-gray-300":"text-gray-700"),children:"Report Type"}),(0,n.jsxs)("select",{value:S.type,onChange:e=>_(t=>(0,r._)((0,s._)({},t),{type:e.target.value})),className:"input-base",children:[(0,n.jsx)("option",{value:"user",children:"User Report"}),(0,n.jsx)("option",{value:"url",children:"URL Report"}),(0,n.jsx)("option",{value:"platform",children:"Platform Report"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat("dark"===e?"text-gray-300":"text-gray-700"),children:"Start Date"}),(0,n.jsx)("input",{type:"date",value:S.startDate,onChange:e=>_(t=>(0,r._)((0,s._)({},t),{startDate:e.target.value})),className:"input-base"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat("dark"===e?"text-gray-300":"text-gray-700"),children:"End Date"}),(0,n.jsx)("input",{type:"date",value:S.endDate,onChange:e=>_(t=>(0,r._)((0,s._)({},t),{endDate:e.target.value})),className:"input-base"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat("dark"===e?"text-gray-300":"text-gray-700"),children:"Export Format"}),(0,n.jsxs)("select",{value:S.format,onChange:e=>_(t=>(0,r._)((0,s._)({},t),{format:e.target.value})),className:"input-base",children:[(0,n.jsx)("option",{value:"json",children:"JSON"}),(0,n.jsx)("option",{value:"csv",children:"CSV"})]})]}),(0,n.jsx)("div",{className:"space-y-3",children:(0,n.jsxs)(c.E.div,{whileHover:{scale:1.02},className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",id:"includeCharts",checked:S.includeCharts,onChange:e=>_(t=>(0,r._)((0,s._)({},t),{includeCharts:e.target.checked})),className:"rounded border-gray-300 dark:border-gray-600"}),(0,n.jsx)("label",{htmlFor:"includeCharts",className:"ml-2 text-sm ".concat("dark"===e?"text-gray-300":"text-gray-700"),children:"Include Chart Configuration Data"})]})}),(0,n.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,n.jsx)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Z(!1),className:"btn-secondary px-4 py-2 rounded-lg",disabled:t,children:"Cancel"}),(0,n.jsx)(c.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:U,className:"btn-primary px-4 py-2 rounded-lg flex items-center space-x-2",disabled:t,children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.Z,{className:"w-4 h-4 animate-spin"}),(0,n.jsx)("span",{children:"Generating..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Generate Report"})]})})]})]})]})})})]})})}},97587:function(e,t,a){"use strict";a.d(t,{t:function(){return n}});var s=a(57437),r=a(60429);let n=e=>{let{title:t,children:a,theme:n,action:l}=e;return(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"card p-6 pb-12 ".concat("dark"===n?"bg-gray-800":"bg-white"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold ".concat("dark"===n?"text-white":"text-gray-900"),children:t}),l&&(0,s.jsx)("div",{children:l})]}),(0,s.jsx)("div",{children:a})]})}}},function(e){e.O(0,[964,227,245,545,971,117,744],function(){return e(e.s=33365)}),_N_E=e.O()}]);