(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{20672:function(e,t,a){Promise.resolve().then(a.bind(a,87885))},3085:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(39763).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},87885:function(e,t,a){"use strict";a.d(t,{default:function(){return H}});var s=a(57437),r=a(2265),i=a(22252),c=a(82431),l=a(37533),n=a(95805),d=a(98335),o=a(70525),x=a(47625),h=a(5481),g=a(56940),m=a(97059),u=a(62994),y=a(8147),b=a(23263),p=a(75169),j=a(3574),f=a(20407),v=a(22190),k=a(6545),N=a(5079),w=a(12025),C=a(71245),D=a(71837),U=a(8286),S=a(97587),R=a(60429);let A=e=>{let{urls:t,theme:a}=e;return(0,s.jsxs)(R.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"card p-6 ".concat("dark"===a?"bg-gray-800":"bg-white"),children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsx)("h3",{className:"text-lg font-semibold ".concat("dark"===a?"text-white":"text-gray-900"),children:"Top Performing URLs"})}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{className:"block sm:hidden space-y-4",children:t.map(e=>(0,s.jsx)(T,{url:e,theme:a},e._id))}),(0,s.jsx)("div",{className:"hidden sm:block",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b ".concat("dark"===a?"border-gray-700":"border-gray-200"),children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-sm sm:text-base ".concat("dark"===a?"text-white":"text-gray-900"),children:"URL"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-sm sm:text-base ".concat("dark"===a?"text-white":"text-gray-900"),children:"Total Clicks"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-sm sm:text-base ".concat("dark"===a?"text-white":"text-gray-900"),children:"Unique Clicks"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 font-semibold text-sm sm:text-base ".concat("dark"===a?"text-white":"text-gray-900"),children:"Created"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsx)(L,{url:e,theme:a},e._id))})]})})]})})]})},T=e=>{let{url:t,theme:a}=e;return(0,s.jsx)("div",{className:"p-4 rounded-lg border ".concat("dark"===a?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"),children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-sm ".concat("dark"===a?"text-white":"text-gray-900"),children:t.title||"Untitled"}),(0,s.jsx)("p",{className:"text-xs break-all mt-1 ".concat("dark"===a?"text-gray-400":"text-gray-600"),children:t.originalUrl}),(0,s.jsxs)("p",{className:"text-xs text-blue-500 font-mono mt-1",children:["snap.ly/",t.shortCode]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-bold text-lg ".concat("dark"===a?"text-white":"text-gray-900"),children:t.clickCount.toLocaleString()}),(0,s.jsx)("div",{className:"text-xs ".concat("dark"===a?"text-gray-400":"text-gray-500"),children:"Total Clicks"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-bold text-lg ".concat("dark"===a?"text-green-400":"text-green-600"),children:t.uniqueClicks.toLocaleString()}),(0,s.jsx)("div",{className:"text-xs ".concat("dark"===a?"text-gray-400":"text-gray-500"),children:"Unique Clicks"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium ".concat("dark"===a?"text-gray-300":"text-gray-700"),children:new Date(t.createdAt).toLocaleDateString()}),(0,s.jsx)("div",{className:"text-xs ".concat("dark"===a?"text-gray-400":"text-gray-500"),children:"Created"})]})]})]})})},L=e=>{let{url:t,theme:a}=e;return(0,s.jsxs)("tr",{className:"border-b ".concat("dark"===a?"border-gray-700/50":"border-gray-100"),children:[(0,s.jsx)("td",{className:"py-4 px-4 max-w-0 w-1/2",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("p",{className:"font-medium text-sm sm:text-base ".concat("dark"===a?"text-white":"text-gray-900"),children:t.title||"Untitled"}),(0,s.jsx)("p",{className:"text-xs sm:text-sm break-all ".concat("dark"===a?"text-gray-400":"text-gray-600"),children:t.originalUrl}),(0,s.jsxs)("p",{className:"text-xs text-blue-500 font-mono",children:["snap.ly/",t.shortCode]})]})}),(0,s.jsx)("td",{className:"py-4 px-4 text-right",children:(0,s.jsx)("span",{className:"font-bold text-base sm:text-lg ".concat("dark"===a?"text-white":"text-gray-900"),children:t.clickCount.toLocaleString()})}),(0,s.jsx)("td",{className:"py-4 px-4 text-right",children:(0,s.jsx)("span",{className:"font-semibold text-base sm:text-lg ".concat("dark"===a?"text-green-400":"text-green-600"),children:t.uniqueClicks.toLocaleString()})}),(0,s.jsx)("td",{className:"py-4 px-4 text-right",children:(0,s.jsx)("span",{className:"text-sm ".concat("dark"===a?"text-gray-400":"text-gray-600"),children:new Date(t.createdAt).toLocaleDateString()})})]})},Z=e=>{let{activities:t,theme:a}=e,r=e=>{switch(e){case"click":return"\uD83D\uDC46";case"create":return"✨";case"update":return"✏️";case"delete":return"\uD83D\uDDD1️";default:return"\uD83D\uDCCA"}},i=e=>{switch(e.type){case"click":return"Click from ".concat(e.location||"Unknown location");case"create":return"New URL created";case"update":return"URL updated";case"delete":return"URL deleted";default:return"Unknown activity"}},c=e=>{let t=new Date,a=new Date(e),s=Math.floor((t.getTime()-a.getTime())/6e4);return s<1?"Just now":s<60?"".concat(s,"m ago"):s<1440?"".concat(Math.floor(s/60),"h ago"):"".concat(Math.floor(s/1440),"d ago")};return(0,s.jsxs)(R.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"card ".concat("dark"===a?"bg-gray-800":"bg-white"),children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("h3",{className:"text-lg font-semibold ".concat("dark"===a?"text-white":"text-gray-900"),children:"Recent Activity"})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,s.jsx)(E,{activity:e,theme:a,getActivityIcon:r,getActivityText:i,formatTime:c},t))})})]})},E=e=>{let{activity:t,theme:a,getActivityIcon:r,getActivityText:i,formatTime:c}=e;return(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm",children:r(t.type)})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm ".concat("dark"===a?"text-white":"text-gray-900"),children:i(t)}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,s.jsx)("span",{className:"text-xs ".concat("dark"===a?"text-gray-400":"text-gray-500"),children:c(t.timestamp)}),t.device&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-xs ".concat("dark"===a?"text-gray-500":"text-gray-400"),children:"•"}),(0,s.jsx)("span",{className:"text-xs ".concat("dark"===a?"text-gray-400":"text-gray-500"),children:t.device})]})]})]})]})};var H=()=>{let{theme:e}=(0,w.Fg)(),{user:t}=(0,C.a)(),[a,R]=(0,r.useState)(null),[T,L]=(0,r.useState)(!0),[E,H]=(0,r.useState)(!1),[q,F]=(0,r.useState)(null),[_,O]=(0,r.useState)("30d"),K=async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{e?L(!0):H(!0),F(null);let t=new Date;t.setHours(23,59,59,999);let a=new Date;switch(_){case"24h":a.setHours(a.getHours()-24);break;case"7d":a.setDate(a.getDate()-7),a.setHours(0,0,0,0);break;case"30d":a.setDate(a.getDate()-30),a.setHours(0,0,0,0);break;case"90d":a.setDate(a.getDate()-90),a.setHours(0,0,0,0)}let s={limit:20},r=a.toISOString(),i=t.toISOString();r&&(s.startDate=r),i&&(s.endDate=i),console.log("Dashboard date range params:",s);let c=await D.ZP.analytics.getDashboard(s);if(c.success&&c.data)R(c.data);else throw Error(c.message||"Failed to fetch dashboard data")}catch(e){console.error("Error fetching dashboard data:",e),F(e instanceof Error?e.message:"Failed to load dashboard data"),R({userId:(null==t?void 0:t.id)||"1",overview:{totalClicks:0,uniqueClicks:0,uniqueVisitors:0,averageLoadTime:0,conversionRate:0,engagementScore:0},trends:[],geographic:{topCountries:[]},topUrls:[],recentActivity:[],performance:{clicksPerDay:0,conversionRate:0,engagementScore:0,peakHour:14,trendDirection:"stable",growthRate:0}})}finally{L(!1),H(!1)}};(0,r.useEffect)(()=>{K(!0)},[_]);let W=async()=>{await K(!1)};return T&&!a?(0,s.jsx)(k.Z,{title:"Dashboard",description:"Welcome back! Here's what's happening with your URLs.",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"card p-6",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),(0,s.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})},t))})}):(0,s.jsxs)(k.Z,{title:"Dashboard",description:"Welcome back, ".concat((null==t?void 0:t.name)||"User","! Here's what's happening with your URLs."),children:[q&&(0,s.jsxs)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i.Z,{className:"w-5 h-5 text-red-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-red-700 dark:text-red-400 text-sm font-medium",children:"Failed to load dashboard data"}),(0,s.jsx)("p",{className:"text-red-600 dark:text-red-500 text-xs",children:q})]})]}),(0,s.jsxs)("div",{className:"mt-3 flex space-x-3",children:[(0,s.jsx)("button",{onClick:W,className:"text-red-600 dark:text-red-400 text-sm hover:text-red-700 dark:hover:text-red-300 underline",disabled:E,children:E?"Retrying...":"Try Again"}),(0,s.jsx)("button",{onClick:()=>F(null),className:"text-red-600 dark:text-red-400 text-sm hover:text-red-700 dark:hover:text-red-300 underline",children:"Dismiss"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)(U.W,{currentRange:_,onChange:O,theme:e}),(0,s.jsx)("button",{onClick:W,disabled:E,className:"p-2 rounded-lg border transition-colors ".concat(E?"animate-spin":""," ").concat("dark"===e?"border-gray-700 hover:bg-gray-800 text-gray-400":"border-gray-300 hover:bg-gray-50 text-gray-600"),title:"Refresh data",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)(N.A,{title:"Total Clicks",value:(null==a?void 0:a.overview.totalClicks)||0,icon:l.Z,color:"blue",theme:e}),(0,s.jsx)(N.A,{title:"Unique Visitors",value:(null==a?void 0:a.overview.uniqueVisitors)||0,icon:n.Z,color:"green",theme:e}),(0,s.jsx)(N.A,{title:"Total URLs",value:(null==a?void 0:a.topUrls.length)||0,icon:d.Z,color:"purple",theme:e}),(0,s.jsx)(N.A,{title:"Conversion Rate",value:(null==a?void 0:a.overview.conversionRate)||0,icon:o.Z,color:"orange",suffix:"%",theme:e})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,s.jsx)(S.t,{title:"Traffic Trends",theme:e,children:(null==a?void 0:a.trends)&&a.trends.length>0?(0,s.jsx)(x.h,{width:"100%",height:300,className:"ml-[-30px]",children:(0,s.jsxs)(h.T,{data:(null==a?void 0:a.trends)||[],children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"colorClicks",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),(0,s.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),(0,s.jsx)(g.q,{strokeDasharray:"3 3",stroke:"dark"===e?"#374151":"#e5e7eb"}),(0,s.jsx)(m.K,{dataKey:"date",stroke:"dark"===e?"#9ca3af":"#6b7280",fontSize:12}),(0,s.jsx)(u.B,{stroke:"dark"===e?"#9ca3af":"#6b7280",fontSize:12}),(0,s.jsx)(y.u,{contentStyle:{backgroundColor:"dark"===e?"#1f2937":"#ffffff",border:"1px solid ".concat("dark"===e?"#374151":"#e5e7eb"),borderRadius:"8px",color:"dark"===e?"#f3f4f6":"#111827"}}),(0,s.jsx)(b.u,{type:"monotone",dataKey:"clicks",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorClicks)",strokeWidth:2})]})}):(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("p",{className:"text-sm ".concat("dark"===e?"text-gray-400":"text-gray-600"),children:"No traffic trend data available"})})}),(0,s.jsx)(S.t,{title:"Top Countries",theme:e,children:(null==a?void 0:a.geographic.topCountries)&&a.geographic.topCountries.length>0?(0,s.jsx)(x.h,{width:"100%",height:300,children:(0,s.jsxs)(p.u,{children:[(0,s.jsx)(j.b,{data:a.geographic.topCountries.filter(e=>e.countryName).map(e=>({name:e.countryName,value:e.count})),cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:e=>{let{name:t}=e;return"".concat(t)},children:a.geographic.topCountries.map((e,t)=>(0,s.jsx)(f.b,{fill:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"][t%5]},"cell-".concat(t)))}),(0,s.jsx)(y.u,{contentStyle:{backgroundColor:"dark"===e?"#1f2937":"#ffffff",border:"1px solid ".concat("dark"===e?"#374151":"#e5e7eb"),borderRadius:"8px",color:"dark"===e?"#f3f4f6":"#111827"}}),(0,s.jsx)(v.D,{})]})}):(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("p",{className:"text-sm ".concat("dark"===e?"text-gray-400":"text-gray-600"),children:"No geographic data available"})})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(null==a?void 0:a.topUrls)&&a.topUrls.length>0&&(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(A,{urls:(null==a?void 0:a.topUrls)||[],theme:e})}),(null==a?void 0:a.recentActivity)&&a.recentActivity.length>0&&(0,s.jsx)("div",{children:(0,s.jsx)(Z,{activities:(null==a?void 0:a.recentActivity)||[],theme:e})})]})]})}},97587:function(e,t,a){"use strict";a.d(t,{t:function(){return i}});var s=a(57437),r=a(60429);let i=e=>{let{title:t,children:a,theme:i,action:c}=e;return(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"card p-6 pb-12 ".concat("dark"===i?"bg-gray-800":"bg-white"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold ".concat("dark"===i?"text-white":"text-gray-900"),children:t}),c&&(0,s.jsx)("div",{children:c})]}),(0,s.jsx)("div",{children:a})]})}},5079:function(e,t,a){"use strict";a.d(t,{A:function(){return n}});var s=a(57437),r=a(60429),i=a(70525),c=a(3085);let l=e=>{let{value:t,prefix:a="",suffix:i="",formatValue:c}=e;return(0,s.jsxs)(r.E.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,type:"spring",stiffness:100,damping:15},children:[a,c(t),i]},t)},n=e=>{let{title:t,value:a,change:n,icon:d,color:o,theme:x,suffix:h="",prefix:g=""}=e,m=!!n&&n>=0;return(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"card card-hover p-6 ".concat("dark"===x?"bg-gray-800":"bg-white"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-lg ".concat({blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",red:"bg-red-500"}[o]),children:(0,s.jsx)(d,{className:"w-6 h-6 text-white"})}),void 0!==n&&(0,s.jsxs)("div",{className:"flex items-center space-x-1 text-sm ".concat(m?"text-green-500":"text-red-500"),children:[m?(0,s.jsx)(i.Z,{className:"w-4 h-4"}):(0,s.jsx)(c.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{className:"font-medium",children:[m?"+":"",n.toFixed(1),"%"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-2xl font-bold ".concat("dark"===x?"text-white":"text-gray-900"," mb-1"),children:(0,s.jsx)(l,{value:a,prefix:g,suffix:h,formatValue:e=>"%"===h?e.toFixed(1):e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()})}),(0,s.jsx)("p",{className:"text-sm ".concat("dark"===x?"text-gray-400":"text-gray-600"),children:t})]})]})}},8286:function(e,t,a){"use strict";a.d(t,{W:function(){return r}});var s=a(57437);let r=e=>{let{currentRange:t,onChange:a,theme:r}=e;return(0,s.jsx)("div",{className:"inline-flex rounded-lg border ".concat("dark"===r?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"," p-1"),children:[{value:"24h",label:"24H"},{value:"7d",label:"7D"},{value:"30d",label:"30D"},{value:"90d",label:"90D"}].map(e=>(0,s.jsx)("button",{onClick:()=>a(e.value),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat(t===e.value?"bg-blue-600 text-white shadow-sm":"dark"===r?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"),children:e.label},e.value))})}}},function(e){e.O(0,[964,227,139,416,245,545,971,117,744],function(){return e(e.s=20672)}),_N_E=e.O()}]);