(()=>{var e={};e.id=25,e.ids=[25],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32059:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>l.a,__next_app__:()=>g,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d}),t(93135),t(74614),t(70903);var r=t(23191),s=t(88716),i=t(37922),l=t.n(i),n=t(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(a,c);let d=["",{children:["analytics",{children:["url",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,93135)),"C:\\Users\\Ваня\\Desktop\\snapurl\\snap-url-admin\\src\\app\\analytics\\url\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,74614)),"C:\\Users\\Ваня\\Desktop\\snapurl\\snap-url-admin\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,70903)),"C:\\Users\\Ваня\\Desktop\\snapurl\\snap-url-admin\\src\\app\\not-found.tsx"]}],o=["C:\\Users\\Ваня\\Desktop\\snapurl\\snap-url-admin\\src\\app\\analytics\\url\\[id]\\page.tsx"],x="/analytics/url/[id]/page",g={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/analytics/url/[id]/page",pathname:"/analytics/url/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},29475:(e,a,t)=>{Promise.resolve().then(t.bind(t,87105))},43810:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(76557).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},7027:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(76557).Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])},12714:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(76557).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},54014:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(76557).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},92447:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});let r=(0,t(76557).Z)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]])},87105:(e,a,t)=>{"use strict";t.d(a,{default:()=>K});var r=t(10326),s=t(17577),i=t(16856),l=t(87888),n=t(86333),c=t(17129),d=t(7027),o=t(76557);let x=(0,o.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var g=t(31540),m=t(21405),h=t(35047),y=t(98058),u=t(23016),p=t(18069),b=t(20176),v=t(24061),f=t(12714),j=t(48998),k=t(17069);let N=(0,o.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),w=({overview:e,performance:a,theme:t,loading:s})=>{let l=[{title:"Total Clicks",value:e?.totalClicks||0,change:a?.growthRate||0,icon:b.Z,color:"blue",suffix:""},{title:"Unique Visitors",value:e?.uniqueVisitors||0,change:0,icon:v.Z,color:"green",suffix:""},{title:"Unique Clicks",value:e?.uniqueClicks||0,change:0,icon:f.Z,color:"purple",suffix:""},{title:"Avg Load Time",value:e?.averageLoadTime||0,change:0,icon:j.Z,color:"orange",suffix:"ms"},{title:"Engagement Score",value:e?.engagementScore||0,change:0,icon:k.Z,color:"indigo",suffix:"%"},{title:"Conversion Rate",value:e?.conversionRate||0,change:0,icon:N,color:"pink",suffix:"%"}],n=e=>{let a={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",indigo:"bg-indigo-500",pink:"bg-pink-500"};return a[e]||a.blue},c=(e,a)=>"ms"===a&&e>1e3?`${(e/1e3).toFixed(1)}s`:e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString();return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:l.map((e,a)=>(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:`card p-4 ${"dark"===t?"bg-gray-800":"bg-white"} ${s?"animate-pulse":""}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${n(e.color)}`,children:r.jsx(e.icon,{className:"w-4 h-4 text-white"})}),0!==e.change&&(0,r.jsxs)("div",{className:`text-xs ${e.change>=0?"text-green-500":"text-red-500"}`,children:[e.change>=0?"+":"",e.change.toFixed(1),"%"]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:`text-xl font-bold ${"dark"===t?"text-white":"text-gray-900"}`,children:s?"...":`${c(e.value,e.suffix)}${e.suffix}`}),r.jsx("p",{className:`text-xs ${"dark"===t?"text-gray-400":"text-gray-600"}`,children:e.title})]})]},e.title))})};var $=t(30660),C=t(10669),R=t(18423),D=t(62637),Z=t(9997),E=t(44675),U=t(47445);let S=({trafficData:e,theme:a,loading:t})=>{let s=e?.clicksByDay?.map(e=>({date:new Date(e.date.year,e.date.month-1,e.date.day).toLocaleDateString("en-US",{month:"short",day:"numeric"}),clicks:e.clicks,uniqueVisitors:e.uniqueVisitors}))?.filter(e=>"Invalid Date"!==e.date)||[];return(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`card p-6 h-full ${"dark"===a?"bg-gray-800":"bg-white"}`,children:[r.jsx("h3",{className:`text-lg font-semibold mb-4 ${"dark"===a?"text-white":"text-gray-900"}`,children:"Traffic Trends"}),t?r.jsx("div",{className:"h-64 animate-pulse bg-gray-200 dark:bg-gray-700 rounded"}):r.jsx($.h,{width:"100%",height:300,className:"ml-[-20px]",children:(0,r.jsxs)(C.T,{data:s,children:[(0,r.jsxs)("defs",{children:[(0,r.jsxs)("linearGradient",{id:"colorClicks",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),(0,r.jsxs)("linearGradient",{id:"colorVisitors",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})]}),r.jsx(R.q,{strokeDasharray:"3 3",stroke:"dark"===a?"#374151":"#e5e7eb"}),r.jsx(D.K,{dataKey:"date",stroke:"dark"===a?"#9ca3af":"#6b7280",fontSize:12}),r.jsx(Z.B,{stroke:"dark"===a?"#9ca3af":"#6b7280",fontSize:12}),r.jsx(E.u,{contentStyle:{backgroundColor:"dark"===a?"#1f2937":"#ffffff",border:`1px solid ${"dark"===a?"#374151":"#e5e7eb"}`,borderRadius:"8px",color:"dark"===a?"#f3f4f6":"#111827"}}),r.jsx(U.u,{type:"monotone",dataKey:"clicks",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorClicks)",strokeWidth:2,name:"Total Clicks"}),r.jsx(U.u,{type:"monotone",dataKey:"uniqueVisitors",stroke:"#10b981",fillOpacity:1,fill:"url(#colorVisitors)",strokeWidth:2,name:"Unique Visitors"})]})})]})};var L=t(54014);let q=({geographicData:e,theme:a,loading:t})=>{let s=e?.topCountries||[],l=s.reduce((e,a)=>e+a.count,0);return(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`card p-6 ${"dark"===a?"bg-gray-800":"bg-white"}`,children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(L.Z,{className:"w-5 h-5 text-blue-500"}),r.jsx("h3",{className:`text-lg font-semibold ${"dark"===a?"text-white":"text-gray-900"}`,children:"Geographic Distribution"})]}),t?r.jsx("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,r.jsxs)("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded"})]},a))}):(0,r.jsxs)("div",{className:"space-y-3",children:[s.slice(0,8).map((e,t)=>{let s=l>0?e.count/l*100:0;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"dark"===a?"text-gray-300":"text-gray-700",children:e.countryName||e._id}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:`text-xs ${"dark"===a?"text-gray-400":"text-gray-500"}`,children:[e.count," clicks"]}),(0,r.jsxs)("span",{className:`text-xs font-medium ${"dark"===a?"text-white":"text-gray-900"}`,children:[s.toFixed(1),"%"]})]})]}),r.jsx("div",{className:`w-full h-2 rounded-full overflow-hidden ${"dark"===a?"bg-gray-700":"bg-gray-200"}`,children:r.jsx(i.E.div,{initial:{width:0},animate:{width:`${s}%`},transition:{delay:.1*t,duration:.5},className:"h-full bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full"})})]},e._id)}),0===s.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(L.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),r.jsx("p",{className:"dark"===a?"text-gray-400":"text-gray-600",children:"No geographic data available yet"})]})]})]})},T=(0,o.Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var M=t(20751),A=t(78948),_=t(99630);let H=({technologyData:e,theme:a,loading:t})=>{let s=e?.byDevice?.map(e=>({name:e._id,value:e.count}))||[],l=e?.byBrowser?.slice(0,5)||[],n=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"];return(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`card p-6 ${"dark"===a?"bg-gray-800":"bg-white"}`,children:[r.jsx("h3",{className:`text-lg font-semibold mb-4 ${"dark"===a?"text-white":"text-gray-900"}`,children:"Device & Browser Analytics"}),t?(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-48 animate-pulse bg-gray-200 dark:bg-gray-700 rounded"}),r.jsx("div",{className:"space-y-2",children:[void 0,void 0,void 0].map((e,a)=>r.jsx("div",{className:"h-4 animate-pulse bg-gray-200 dark:bg-gray-700 rounded"},a))})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[s.length>0&&(0,r.jsxs)("div",{children:[r.jsx("h4",{className:`text-sm font-medium mb-3 ${"dark"===a?"text-gray-300":"text-gray-700"}`,children:"Device Types"}),r.jsx($.h,{width:"100%",height:200,children:(0,r.jsxs)(M.u,{children:[r.jsx(A.b,{data:s,cx:"50%",cy:"50%",outerRadius:60,dataKey:"value",children:s.map((e,a)=>r.jsx(_.b,{fill:n[a%n.length]},`cell-${a}`))}),r.jsx(E.u,{contentStyle:{backgroundColor:"dark"===a?"#1f2937":"#ffffff",border:`1px solid ${"dark"===a?"#374151":"#e5e7eb"}`,borderRadius:"8px",color:"dark"===a?"#f3f4f6":"#111827"}})]})})]}),l.length>0&&(0,r.jsxs)("div",{children:[r.jsx("h4",{className:`text-sm font-medium mb-3 ${"dark"===a?"text-gray-300":"text-gray-700"}`,children:"Top Browsers"}),r.jsx("div",{className:"space-y-2",children:l.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`text-sm ${"dark"===a?"text-gray-300":"text-gray-700"}`,children:e._id}),r.jsx("span",{className:`text-sm font-medium ${"dark"===a?"text-white":"text-gray-900"}`,children:e.count})]},e._id))})]}),0===s.length&&0===l.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(T,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),r.jsx("p",{className:"dark"===a?"text-gray-400":"text-gray-600",children:"No device data available yet"})]})]})]})},P=({referrerData:e,theme:a,loading:t})=>{let s=e||[],l=s.reduce((e,a)=>e+a.count,0),n=e=>{if(!e||"direct"===e)return"Direct Traffic";try{return new URL(e).hostname.replace("www.","")}catch{return e}};return(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`card p-6 ${"dark"===a?"bg-gray-800":"bg-white"}`,children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(d.Z,{className:"w-5 h-5 text-blue-500"}),r.jsx("h3",{className:`text-lg font-semibold ${"dark"===a?"text-white":"text-gray-900"}`,children:"Traffic Sources"})]}),t?r.jsx("div",{className:"space-y-3",children:[...Array(6)].map((e,a)=>(0,r.jsxs)("div",{className:"animate-pulse flex items-center justify-between",children:[r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-16"})]},a))}):(0,r.jsxs)("div",{className:"space-y-3",children:[s.slice(0,10).map((e,t)=>{let s=l>0?e.count/l*100:0;return(0,r.jsxs)(i.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:`flex items-center justify-between p-3 rounded-lg ${"dark"===a?"bg-gray-700/50":"bg-gray-50"}`,children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:`text-sm font-medium truncate ${"dark"===a?"text-white":"text-gray-900"}`,children:n(e._id)}),(0,r.jsxs)("p",{className:`text-xs ${"dark"===a?"text-gray-400":"text-gray-500"}`,children:[s.toFixed(1),"% of traffic"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`text-sm font-medium ${"dark"===a?"text-white":"text-gray-900"}`,children:e.count}),r.jsx(k.Z,{className:"w-4 h-4 text-green-500"})]})]},e._id)}),0===s.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(d.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),r.jsx("p",{className:"dark"===a?"text-gray-400":"text-gray-600",children:"No referrer data available yet"})]})]})]})};var O=t(92447),z=t(43810);let B=({url:e,theme:a})=>{let[t,l]=(0,s.useState)(!1),[n,c]=(0,s.useState)(e?.qrCode||null),[d,o]=(0,s.useState)(!1),[x,h]=(0,s.useState)(256),y=async(a=x)=>{if(e?.id)try{l(!0);let t=await p.ZP.urls.generateQR(e.id,{size:a,format:"png"});t.success&&t.data?.qrCode&&c(t.data.qrCode.dataURL)}catch(e){console.error("Failed to generate QR code:",e)}finally{l(!1)}},u=async()=>{if(n)try{await navigator.clipboard.writeText(n),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy QR code:",e)}};return(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`card p-6 ${"dark"===a?"bg-gray-800":"bg-white"}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(O.Z,{className:"w-5 h-5 text-blue-500"}),r.jsx("h3",{className:`text-lg font-semibold ${"dark"===a?"text-white":"text-gray-900"}`,children:"QR Code"})]}),n&&!t&&r.jsx("button",{onClick:()=>y(),className:`p-2 rounded-lg transition-colors hover:scale-105 ${"dark"===a?"hover:bg-gray-700 text-gray-400 hover:text-white":"hover:bg-gray-100 text-gray-600 hover:text-gray-800"}`,title:"Regenerate QR code",children:r.jsx(m.Z,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"text-center",children:t?r.jsx("div",{className:"flex items-center justify-center h-48",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),r.jsx(O.Z,{className:"absolute inset-0 m-auto w-6 h-6 text-blue-500"})]})}):n?(0,r.jsxs)(i.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"space-y-4",children:[r.jsx("div",{className:"inline-block p-4 bg-white rounded-xl shadow-lg",children:r.jsx("img",{src:n,alt:"QR Code",className:`mx-auto transition-all duration-300 ${128===x?"w-32 h-32":256===x?"w-40 h-40":512===x?"w-48 h-48":"w-40 h-40"}`})}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("p",{className:`text-sm font-medium ${"dark"===a?"text-white":"text-gray-900"}`,children:e?.title||"URL QR Code"}),r.jsx("p",{className:`text-xs font-mono ${"dark"===a?"text-gray-400":"text-gray-600"}`,children:e?.shortUrl})]}),(0,r.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,r.jsxs)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{if(!n)return;let a=document.createElement("a");a.download=`qr-code-${e?.title?.replace(/[^a-z0-9]/gi,"_").toLowerCase()||e?.id||"url"}.png`,a.href=n,document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"btn-secondary flex items-center px-4 py-2 text-sm",children:[r.jsx(g.Z,{className:"w-4 h-4 mr-2"}),"Download"]}),(0,r.jsxs)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:u,className:`btn-secondary flex items-center px-4 py-2 text-sm transition-colors ${d?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":""}`,children:[r.jsx(z.Z,{className:"w-4 h-4 mr-2"}),d?"Copied!":"Copy"]})]})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:`w-40 h-40 mx-auto rounded-xl border-2 border-dashed flex items-center justify-center ${"dark"===a?"border-gray-600 bg-gray-700/30":"border-gray-300 bg-gray-50"}`,children:r.jsx(O.Z,{className:"w-12 h-12 text-gray-400"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("p",{className:`text-sm ${"dark"===a?"text-gray-300":"text-gray-700"}`,children:"No QR code available"}),r.jsx(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>y(),disabled:t,className:"btn-primary px-6 py-2 text-sm",children:"Generate QR Code"})]})]})}),r.jsx("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[r.jsx("p",{className:`text-sm font-medium mb-3 ${"dark"===a?"text-gray-300":"text-gray-700"}`,children:"Size Options"}),r.jsx("div",{className:"flex justify-center space-x-2",children:[128,256,512].map(e=>(0,r.jsxs)("button",{onClick:()=>{h(e),n&&y(e)},disabled:t,className:`px-3 py-2 text-sm rounded-lg transition-all ${x===e?"bg-blue-600 text-white shadow-sm":"dark"===a?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:[e,"px"]},e))})]})})]})]})};var V=t(86462),I=t(3634),F=t(66697);let G=({realTimeData:e,theme:a,loading:t})=>{let[l,n]=(0,s.useState)(0),[c,d]=(0,s.useState)(e);(0,s.useEffect)(()=>{e&&c&&(e.clicksLast5Minutes!==c.clicksLast5Minutes||e.clicksLastHour!==c.clicksLastHour)&&n(e=>e+1),d(e)},[e]);let o=[{title:"Last 5 Minutes",value:e?.clicksLast5Minutes||0,icon:I.Z,color:"text-green-500",bgColor:"bg-green-100 dark:bg-green-900/20",gradient:"from-green-400 to-emerald-500",description:"Recent activity"},{title:"Last Hour",value:e?.clicksLastHour||0,icon:j.Z,color:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900/20",gradient:"from-blue-400 to-cyan-500",description:"Hourly traffic"},{title:"Active Countries",value:e?.activeCountries?.length||0,icon:L.Z,color:"text-purple-500",bgColor:"bg-purple-100 dark:bg-purple-900/20",gradient:"from-purple-400 to-pink-500",description:"Global reach"}],x=!!e?.lastUpdated&&(e=>{try{let a=new Date(e);return(new Date().getTime()-a.getTime())/6e4<5}catch{return!1}})(e.lastUpdated);return(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`card p-6 relative overflow-hidden ${"dark"===a?"bg-gray-800":"bg-white"}`,children:[r.jsx("div",{className:"absolute inset-0 opacity-5",children:r.jsx(i.E.div,{animate:{rotate:360,scale:[1,1.2,1]},transition:{rotate:{duration:20,repeat:1/0,ease:"linear"},scale:{duration:4,repeat:1/0,ease:"easeInOut"}},className:"absolute -top-4 -right-4 w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full"})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6 relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(i.E.div,{animate:{scale:[1,1.2,1]},transition:{duration:.6},className:"relative",children:[r.jsx(F.Z,{className:"w-6 h-6 text-red-500"}),x&&r.jsx(i.E.div,{animate:{scale:[1,1.5,1],opacity:[1,0,1]},transition:{duration:2,repeat:1/0},className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]},l),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:`text-lg font-semibold ${"dark"===a?"text-white":"text-gray-900"}`,children:"Real-time Activity"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:`flex items-center space-x-1 ${x?"text-green-500":"text-yellow-500"}`,children:[r.jsx(i.E.div,{animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},className:`w-2 h-2 rounded-full ${x?"bg-green-500":"bg-yellow-500"}`}),r.jsx("span",{className:"text-xs font-medium",children:x?"Live":"Delayed"})]}),e?.lastUpdated&&(0,r.jsxs)("span",{className:`text-xs ${"dark"===a?"text-gray-400":"text-gray-600"}`,children:["• ",(e=>{try{let a=new Date(e),t=new Date,r=Math.floor((t.getTime()-a.getTime())/1e3);if(r<10)return"Just now";if(r<60)return`${r}s ago`;if(r<3600)return`${Math.floor(r/60)}m ago`;return`${Math.floor(r/3600)}h ago`}catch{return"Unknown"}})(e.lastUpdated)]})]})]})]}),r.jsx("div",{className:`text-right ${"dark"===a?"text-gray-300":"text-gray-700"}`,children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(k.Z,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:(e?.clicksLastHour||0)>0?"Active":"Quiet"})]})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 relative z-10",children:r.jsx(V.M,{mode:"wait",children:o.map((e,s)=>(0,r.jsxs)(i.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},transition:{delay:.1*s,duration:.4},className:`relative p-4 rounded-xl border ${"dark"===a?"bg-gray-700/50 border-gray-600":"bg-gray-50 border-gray-200"} hover:shadow-lg transition-all duration-300`,children:[r.jsx(V.M,{children:l>0&&r.jsx(i.E.div,{initial:{opacity:0},animate:{opacity:.1},exit:{opacity:0},transition:{duration:1},className:`absolute inset-0 rounded-xl bg-gradient-to-br ${e.gradient}`})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 relative z-10",children:[r.jsx(i.E.div,{whileHover:{rotate:360},transition:{duration:.6},className:`p-3 rounded-lg ${e.bgColor}`,children:r.jsx(e.icon,{className:`w-5 h-5 ${e.color}`})}),(0,r.jsxs)("div",{children:[r.jsx(i.E.p,{initial:{scale:1.2,color:e.color.replace("text-","")},animate:{scale:1,color:"dark"===a?"#ffffff":"#1f2937"},transition:{duration:.3},className:`text-2xl font-bold ${"dark"===a?"text-white":"text-gray-900"}`,children:t?r.jsx("span",{className:"animate-pulse",children:"..."}):e.value.toLocaleString()},`${e.value}-${l}`),r.jsx("p",{className:`text-xs font-medium ${"dark"===a?"text-gray-400":"text-gray-600"}`,children:e.title}),r.jsx("p",{className:"text-xs text-gray-500",children:e.description})]})]}),e.value>0&&r.jsx(i.E.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},className:`absolute top-2 right-2 p-1 rounded-full ${e.bgColor}`,children:r.jsx(k.Z,{className:`w-3 h-3 ${e.color}`})})]},e.title))})}),e?.activeCountries&&e.activeCountries.length>0&&(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-6 relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[r.jsx(v.Z,{className:"w-4 h-4 text-blue-500"}),r.jsx("p",{className:`text-sm font-medium ${"dark"===a?"text-gray-300":"text-gray-700"}`,children:"Active Countries Right Now"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.activeCountries.slice(0,8).map((e,t)=>r.jsx(i.E.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5+.1*t},className:`px-2 py-1 text-xs rounded-full ${"dark"===a?"bg-blue-900/30 text-blue-300":"bg-blue-100 text-blue-700"}`,children:e},e)),e.activeCountries.length>8&&(0,r.jsxs)("span",{className:`px-2 py-1 text-xs rounded-full ${"dark"===a?"bg-gray-700 text-gray-400":"bg-gray-200 text-gray-600"}`,children:["+",e.activeCountries.length-8," more"]})]})]})]})};var Q=t(55116);let K=({urlId:e})=>{let{theme:a}=(0,u.Fg)(),t=(0,h.useRouter)(),[o,b]=(0,s.useState)(null),[v,f]=(0,s.useState)(!0),[j,k]=(0,s.useState)(!1),[N,$]=(0,s.useState)(null),[C,R]=(0,s.useState)("7d"),D=async(a=!0)=>{try{a?f(!0):k(!0),$(null);let t=new Date;t.setHours(23,59,59,999);let r=new Date;switch(C){case"24h":r.setHours(r.getHours()-24);break;case"7d":r.setDate(r.getDate()-7),r.setHours(0,0,0,0);break;case"30d":r.setDate(r.getDate()-30),r.setHours(0,0,0,0);break;case"90d":r.setDate(r.getDate()-90),r.setHours(0,0,0,0)}let s={startDate:r.toISOString(),endDate:t.toISOString(),excludeBots:!0,includeRealTime:!0};console.log("Date range params:",s);let i=await p.ZP.analytics.getUrlAnalytics(e,s);if(i.success&&i.data){console.log("Raw API response:",i.data);let a={url:{id:String(i.data.url._id||e),originalUrl:i.data.url.originalUrl,shortUrl:i.data.url.shortUrl,shortCode:i.data.url.shortCode||"",...i.data.url.title&&{title:i.data.url.title},createdAt:i.data.url.createdAt,isActive:i.data.url.isActive??!0,..."string"==typeof i.data.url.qrCode&&{qrCode:i.data.url.qrCode}},overview:{totalClicks:i.data.overview?.totalClicks||0,uniqueClicks:i.data.overview?.uniqueClicks||0,uniqueVisitors:i.data.overview?.uniqueVisitors||0,averageLoadTime:i.data.overview?.averageLoadTime||0,conversionRate:i.data.overview?.conversionRate||0,engagementScore:i.data.overview?.engagementScore||0},geographic:i.data.geographic||{byCountry:[],topCountries:[]},technology:{byDevice:i.data.technology?.byDevice||[],byBrowser:i.data.technology?.byBrowser||[],topBrowsers:i.data.technology?.topBrowsers||[]},traffic:{byReferrer:i.data.traffic?.byReferrer||[],clicksByHour:i.data.traffic?.clicksByHour?.map(e=>({hour:e.hour||e._id||String(e.time||0),clicks:e.clicks||e.count||0}))||[],clicksByDay:i.data.traffic?.clicksByDay?.map(e=>({date:e.date||e._id||new Date().toISOString().split("T")[0],clicks:e.clicks||e.count||0,uniqueVisitors:e.uniqueVisitorsCount||0}))||[]},performance:{clicksPerDay:i.data.performance?.clicksPerDay||0,conversionRate:i.data.performance?.conversionRate||0,engagementScore:i.data.performance?.engagementScore||0,peakHour:i.data.performance?.peakHour||0,trendDirection:i.data.performance?.trendDirection||"stable",growthRate:i.data.performance?.growthRate||0},realTime:i.data.realTime||{clicksLast5Minutes:0,clicksLastHour:0,activeCountries:[],lastUpdated:new Date().toISOString()},dateRange:i.data.dateRange||{startDate:r.toISOString(),endDate:t.toISOString()}};console.log("Transformed data traffic:",a.traffic),b(a)}else throw Error(i.message||"Failed to fetch analytics data")}catch(e){console.error("Error fetching URL analytics:",e),$(e instanceof Error?e.message:"Failed to load analytics data")}finally{f(!1),k(!1)}};(0,s.useEffect)(()=>{D(!0)},[e,C]);let Z=async()=>{await D(!1)},E=async()=>{if(!o?.dateRange.startDate||!o?.dateRange.endDate){console.error("Date range not available for report generation");return}try{let a=await p.ZP.analytics.generateReport({type:"url",targetId:e,startDate:o.dateRange.startDate,endDate:o.dateRange.endDate,format:"csv",includeCharts:!1});if(a.success){let t=new Blob([a.data],{type:"text/csv"}),r=window.URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=`url-analytics-${e}-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(r),document.body.removeChild(s)}}catch(e){console.error("Error downloading report:",e)}},U=async()=>{try{let e={title:`Analytics for ${o?.url.title||"URL"}`,text:`Check out the analytics for this URL: ${o?.overview.totalClicks} total clicks`,url:window.location.href};navigator.share?await navigator.share(e):await navigator.clipboard.writeText(window.location.href)}catch(e){console.error("Error sharing:",e)}};return v&&!o?r.jsx(y.Z,{title:"URL Analytics",description:"Loading analytics data...",children:r.jsx("div",{className:"space-y-6",children:[void 0,void 0,void 0,void 0].map((e,a)=>r.jsx("div",{className:"card p-6",children:(0,r.jsxs)("div",{className:"animate-pulse space-y-3",children:[r.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),r.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded"}),r.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]})},a))})}):N&&!o?r.jsx(y.Z,{title:"URL Analytics",description:"Error loading analytics",children:r.jsx(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-center min-h-[60vh]",children:r.jsx("div",{className:"max-w-2xl w-full px-4",children:(0,r.jsxs)("div",{className:`card p-8 md:p-12 text-center ${"dark"===a?"bg-gray-800 border-red-900/50":"bg-white border-red-200"} border-2`,children:[r.jsx(i.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"flex justify-center mb-6",children:r.jsx("div",{className:`p-4 rounded-full ${"dark"===a?"bg-red-900/30 border-2 border-red-800":"bg-red-100 border-2 border-red-300"}`,children:r.jsx(l.Z,{className:`w-16 h-16 ${"dark"===a?"text-red-400":"text-red-600"}`})})}),r.jsx(i.E.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:`text-2xl font-bold mb-3 ${"dark"===a?"text-white":"text-gray-900"}`,children:"URL Not Found"}),(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:`p-4 rounded-lg mb-6 text-left ${"dark"===a?"bg-gray-700/50 border border-gray-600":"bg-gray-50 border border-gray-200"}`,children:[r.jsx("p",{className:`text-sm ${"dark"===a?"text-gray-300":"text-gray-600"}`,children:r.jsx("strong",{children:"Possible reasons:"})}),(0,r.jsxs)("ul",{className:`text-sm mt-2 space-y-1 list-disc list-inside ${"dark"===a?"text-gray-400":"text-gray-600"}`,children:[r.jsx("li",{children:"The URL may have been deleted"}),r.jsx("li",{children:"You don't have permission to view this URL"}),r.jsx("li",{children:"The link you followed might be incorrect"})]})]}),(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex flex-col sm:flex-row justify-center gap-3",children:[(0,r.jsxs)("button",{onClick:()=>t.back(),className:`flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-colors ${"dark"===a?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[r.jsx(n.Z,{className:"w-4 h-4 mr-2"}),"Go Back"]}),(0,r.jsxs)("button",{onClick:()=>t.push("/urls"),className:"flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[r.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"View All URLs"]})]})]})})})}):r.jsx(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,r.jsxs)(y.Z,{title:o?.url.title||"URL Analytics",description:`Analytics for ${o?.url.shortUrl}`,children:[r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("button",{onClick:()=>t.back(),className:`p-2 rounded-lg border transition-colors ${"dark"===a?"border-gray-700 hover:bg-gray-800 text-gray-400":"border-gray-300 hover:bg-gray-50 text-gray-600"}`,children:r.jsx(n.Z,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[r.jsx("h1",{className:`text-xl font-bold truncate ${"dark"===a?"text-white":"text-gray-900"}`,children:o?.url.title||"Untitled URL"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mt-1",children:[(0,r.jsxs)("a",{href:o?.url.originalUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:text-blue-600 truncate flex items-center",children:[o?.url.originalUrl,r.jsx(d.Z,{className:"w-3 h-3 ml-1 flex-shrink-0"})]}),r.jsx("span",{className:`text-xs px-2 py-1 rounded ${o?.url.isActive?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:o?.url.isActive?"Active":"Inactive"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("div",{className:"w-full sm:w-auto",children:r.jsx(Q.W,{currentRange:C,onChange:R,theme:a})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("button",{onClick:U,className:"btn-secondary px-4 py-2 rounded-full flex items-center",children:[r.jsx(x,{className:"w-4 h-4 mr-2"}),"Share"]}),(0,r.jsxs)("button",{onClick:E,className:"btn-secondary px-4 py-2 rounded-full flex items-center",children:[r.jsx(g.Z,{className:"w-4 h-4 mr-2"}),"Export"]}),r.jsx("button",{onClick:Z,disabled:j,className:`p-2 rounded-lg border transition-colors ${j?"animate-spin":""} ${"dark"===a?"border-gray-700 hover:bg-gray-800 text-gray-400":"border-gray-300 hover:bg-gray-50 text-gray-600"}`,title:"Refresh data",children:r.jsx(m.Z,{className:"w-4 h-4"})})]})]})]})}),r.jsx("div",{className:"mb-6",children:r.jsx(G,{realTimeData:o?.realTime,theme:a,loading:j})}),r.jsx("div",{className:"mb-8",children:r.jsx(w,{overview:o?.overview,performance:o?.performance,theme:a,loading:j})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"xl:col-span-2",children:r.jsx(S,{trafficData:o?.traffic,theme:a,loading:j})}),r.jsx("div",{children:r.jsx(B,{url:o?.url,theme:a})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[r.jsx(q,{geographicData:o?.geographic,theme:a,loading:j}),r.jsx(H,{technologyData:o?.technology,theme:a,loading:j})]}),r.jsx("div",{className:"mb-8",children:r.jsx(P,{referrerData:o?.traffic?.byReferrer,theme:a,loading:j})})]})})}},55116:(e,a,t)=>{"use strict";t.d(a,{W:()=>s});var r=t(10326);let s=({currentRange:e,onChange:a,theme:t})=>r.jsx("div",{className:`inline-flex rounded-lg border ${"dark"===t?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"} p-1`,children:[{value:"24h",label:"24H"},{value:"7d",label:"7D"},{value:"30d",label:"30D"},{value:"90d",label:"90D"}].map(s=>r.jsx("button",{onClick:()=>a(s.value),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${e===s.value?"bg-blue-600 text-white shadow-sm":"dark"===t?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"}`,children:s.label},s.value))})},93135:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l,generateMetadata:()=>i});var r=t(19510);let s=(0,t(68570).createProxy)(String.raw`C:\Users\Ваня\Desktop\snapurl\snap-url-admin\src\app\analytics\url\[id]\UrlAnalyticsContent.tsx#default`);async function i(){return{title:"URL Analytics - SnapURL",description:"Detailed analytics and insights for your shortened URL including clicks, geographic data, device information, and performance metrics.",keywords:"URL analytics, click tracking, geographic data, device analytics, performance metrics"}}function l({params:e}){return r.jsx(s,{urlId:e.id})}}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[35,889,421,649],()=>t(32059));module.exports=r})();