(()=>{var e={};e.id=702,e.ids=[702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12574:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c}),a(18415),a(74614),a(70903);var s=a(23191),r=a(88716),i=a(37922),l=a.n(i),d=a(95231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);a.d(t,n);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,18415)),"C:\\Users\\Ваня\\Desktop\\snapurl\\snap-url-admin\\src\\app\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,74614)),"C:\\Users\\Ваня\\Desktop\\snapurl\\snap-url-admin\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,70903)),"C:\\Users\\Ваня\\Desktop\\snapurl\\snap-url-admin\\src\\app\\not-found.tsx"]}],o=["C:\\Users\\Ваня\\Desktop\\snapurl\\snap-url-admin\\src\\app\\dashboard\\page.tsx"],x="/dashboard/page",h={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},29787:(e,t,a)=>{Promise.resolve().then(a.bind(a,15229))},29163:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},15229:(e,t,a)=>{"use strict";a.d(t,{default:()=>_});var s=a(10326),r=a(17577),i=a(87888),l=a(21405),d=a(20176),n=a(24061),c=a(17129),o=a(17069),x=a(30660),h=a(10669),m=a(18423),g=a(62637),p=a(9997),u=a(44675),b=a(47445),y=a(20751),j=a(78948),f=a(99630),v=a(69274),k=a(98058),N=a(96489),w=a(23016),$=a(74690),D=a(18069),C=a(55116),U=a(33030),R=a(16856);let S=({urls:e,theme:t})=>(0,s.jsxs)(R.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`card p-6 ${"dark"===t?"bg-gray-800":"bg-white"}`,children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("h3",{className:`text-lg font-semibold ${"dark"===t?"text-white":"text-gray-900"}`,children:"Top Performing URLs"})}),s.jsx("div",{children:(0,s.jsxs)("div",{className:"w-full",children:[s.jsx("div",{className:"block sm:hidden space-y-4",children:e.map(e=>s.jsx(A,{url:e,theme:t},e._id))}),s.jsx("div",{className:"hidden sm:block",children:(0,s.jsxs)("table",{className:"w-full",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{className:`border-b ${"dark"===t?"border-gray-700":"border-gray-200"}`,children:[s.jsx("th",{className:`text-left py-3 px-4 font-semibold text-sm sm:text-base ${"dark"===t?"text-white":"text-gray-900"}`,children:"URL"}),s.jsx("th",{className:`text-right py-3 px-4 font-semibold text-sm sm:text-base ${"dark"===t?"text-white":"text-gray-900"}`,children:"Total Clicks"}),s.jsx("th",{className:`text-right py-3 px-4 font-semibold text-sm sm:text-base ${"dark"===t?"text-white":"text-gray-900"}`,children:"Unique Clicks"}),s.jsx("th",{className:`text-right py-3 px-4 font-semibold text-sm sm:text-base ${"dark"===t?"text-white":"text-gray-900"}`,children:"Created"})]})}),s.jsx("tbody",{children:e.map(e=>s.jsx(L,{url:e,theme:t},e._id))})]})})]})})]}),A=({url:e,theme:t})=>s.jsx("div",{className:`p-4 rounded-lg border ${"dark"===t?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"}`,children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:`font-semibold text-sm ${"dark"===t?"text-white":"text-gray-900"}`,children:e.title||"Untitled"}),s.jsx("p",{className:`text-xs break-all mt-1 ${"dark"===t?"text-gray-400":"text-gray-600"}`,children:e.originalUrl}),(0,s.jsxs)("p",{className:"text-xs text-blue-500 font-mono mt-1",children:["snap.ly/",e.shortCode]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:`font-bold text-lg ${"dark"===t?"text-white":"text-gray-900"}`,children:e.clickCount.toLocaleString()}),s.jsx("div",{className:`text-xs ${"dark"===t?"text-gray-400":"text-gray-500"}`,children:"Total Clicks"})]}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:`font-bold text-lg ${"dark"===t?"text-green-400":"text-green-600"}`,children:e.uniqueClicks.toLocaleString()}),s.jsx("div",{className:`text-xs ${"dark"===t?"text-gray-400":"text-gray-500"}`,children:"Unique Clicks"})]}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:`text-sm font-medium ${"dark"===t?"text-gray-300":"text-gray-700"}`,children:new Date(e.createdAt).toLocaleDateString()}),s.jsx("div",{className:`text-xs ${"dark"===t?"text-gray-400":"text-gray-500"}`,children:"Created"})]})]})]})}),L=({url:e,theme:t})=>(0,s.jsxs)("tr",{className:`border-b ${"dark"===t?"border-gray-700/50":"border-gray-100"}`,children:[s.jsx("td",{className:"py-4 px-4 max-w-0 w-1/2",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:`font-medium text-sm sm:text-base ${"dark"===t?"text-white":"text-gray-900"}`,children:e.title||"Untitled"}),s.jsx("p",{className:`text-xs sm:text-sm break-all ${"dark"===t?"text-gray-400":"text-gray-600"}`,children:e.originalUrl}),(0,s.jsxs)("p",{className:"text-xs text-blue-500 font-mono",children:["snap.ly/",e.shortCode]})]})}),s.jsx("td",{className:"py-4 px-4 text-right",children:s.jsx("span",{className:`font-bold text-base sm:text-lg ${"dark"===t?"text-white":"text-gray-900"}`,children:e.clickCount.toLocaleString()})}),s.jsx("td",{className:"py-4 px-4 text-right",children:s.jsx("span",{className:`font-semibold text-base sm:text-lg ${"dark"===t?"text-green-400":"text-green-600"}`,children:e.uniqueClicks.toLocaleString()})}),s.jsx("td",{className:"py-4 px-4 text-right",children:s.jsx("span",{className:`text-sm ${"dark"===t?"text-gray-400":"text-gray-600"}`,children:new Date(e.createdAt).toLocaleDateString()})})]}),P=({activities:e,theme:t})=>{let a=e=>{switch(e){case"click":return"\uD83D\uDC46";case"create":return"✨";case"update":return"✏️";case"delete":return"\uD83D\uDDD1️";default:return"\uD83D\uDCCA"}},r=e=>{switch(e.type){case"click":return`Click from ${e.location||"Unknown location"}`;case"create":return"New URL created";case"update":return"URL updated";case"delete":return"URL deleted";default:return"Unknown activity"}},i=e=>{let t=new Date,a=new Date(e),s=Math.floor((t.getTime()-a.getTime())/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:`${Math.floor(s/1440)}d ago`};return(0,s.jsxs)(R.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`card ${"dark"===t?"bg-gray-800":"bg-white"}`,children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h3",{className:`text-lg font-semibold ${"dark"===t?"text-white":"text-gray-900"}`,children:"Recent Activity"})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-4",children:e.map((e,l)=>s.jsx(T,{activity:e,theme:t,getActivityIcon:a,getActivityText:r,formatTime:i},l))})})]})},T=({activity:e,theme:t,getActivityIcon:a,getActivityText:r,formatTime:i})=>(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center",children:s.jsx("span",{className:"text-sm",children:a(e.type)})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm ${"dark"===t?"text-white":"text-gray-900"}`,children:r(e)}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:`text-xs ${"dark"===t?"text-gray-400":"text-gray-500"}`,children:i(e.timestamp)}),e.device&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{className:`text-xs ${"dark"===t?"text-gray-500":"text-gray-400"}`,children:"•"}),s.jsx("span",{className:`text-xs ${"dark"===t?"text-gray-400":"text-gray-500"}`,children:e.device})]})]})]})]}),_=()=>{let{theme:e}=(0,w.Fg)(),{user:t}=(0,$.a)(),[a,R]=(0,r.useState)(null),[A,L]=(0,r.useState)(!0),[T,_]=(0,r.useState)(!1),[q,E]=(0,r.useState)(null),[Z,H]=(0,r.useState)("30d"),F=async(e=!0)=>{try{e?L(!0):_(!0),E(null);let t=new Date;t.setHours(23,59,59,999);let a=new Date;switch(Z){case"24h":a.setHours(a.getHours()-24);break;case"7d":a.setDate(a.getDate()-7),a.setHours(0,0,0,0);break;case"30d":a.setDate(a.getDate()-30),a.setHours(0,0,0,0);break;case"90d":a.setDate(a.getDate()-90),a.setHours(0,0,0,0)}let s={limit:20},r=a.toISOString(),i=t.toISOString();r&&(s.startDate=r),i&&(s.endDate=i),console.log("Dashboard date range params:",s);let l=await D.ZP.analytics.getDashboard(s);if(l.success&&l.data)R(l.data);else throw Error(l.message||"Failed to fetch dashboard data")}catch(e){console.error("Error fetching dashboard data:",e),E(e instanceof Error?e.message:"Failed to load dashboard data"),R({userId:t?.id||"1",overview:{totalClicks:0,uniqueClicks:0,uniqueVisitors:0,averageLoadTime:0,conversionRate:0,engagementScore:0},trends:[],geographic:{topCountries:[]},topUrls:[],recentActivity:[],performance:{clicksPerDay:0,conversionRate:0,engagementScore:0,peakHour:14,trendDirection:"stable",growthRate:0}})}finally{L(!1),_(!1)}};(0,r.useEffect)(()=>{F(!0)},[Z]);let M=async()=>{await F(!1)};return A&&!a?s.jsx(k.Z,{title:"Dashboard",description:"Welcome back! Here's what's happening with your URLs.",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[void 0,void 0,void 0,void 0].map((e,t)=>s.jsx("div",{className:"card p-6",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-3",children:[s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded"}),s.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})},t))})}):(0,s.jsxs)(k.Z,{title:"Dashboard",description:`Welcome back, ${t?.name||"User"}! Here's what's happening with your URLs.`,children:[q&&(0,s.jsxs)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(i.Z,{className:"w-5 h-5 text-red-500"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm font-medium",children:"Failed to load dashboard data"}),s.jsx("p",{className:"text-red-600 dark:text-red-500 text-xs",children:q})]})]}),(0,s.jsxs)("div",{className:"mt-3 flex space-x-3",children:[s.jsx("button",{onClick:M,className:"text-red-600 dark:text-red-400 text-sm hover:text-red-700 dark:hover:text-red-300 underline",disabled:T,children:T?"Retrying...":"Try Again"}),s.jsx("button",{onClick:()=>E(null),className:"text-red-600 dark:text-red-400 text-sm hover:text-red-700 dark:hover:text-red-300 underline",children:"Dismiss"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[s.jsx(C.W,{currentRange:Z,onChange:H,theme:e}),s.jsx("button",{onClick:M,disabled:T,className:`p-2 rounded-lg border transition-colors ${T?"animate-spin":""} ${"dark"===e?"border-gray-700 hover:bg-gray-800 text-gray-400":"border-gray-300 hover:bg-gray-50 text-gray-600"}`,title:"Refresh data",children:s.jsx(l.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(N.A,{title:"Total Clicks",value:a?.overview.totalClicks||0,icon:d.Z,color:"blue",theme:e}),s.jsx(N.A,{title:"Unique Visitors",value:a?.overview.uniqueVisitors||0,icon:n.Z,color:"green",theme:e}),s.jsx(N.A,{title:"Total URLs",value:a?.topUrls.length||0,icon:c.Z,color:"purple",theme:e}),s.jsx(N.A,{title:"Conversion Rate",value:a?.overview.conversionRate||0,icon:o.Z,color:"orange",suffix:"%",theme:e})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[s.jsx(U.t,{title:"Traffic Trends",theme:e,children:a?.trends&&a.trends.length>0?s.jsx(x.h,{width:"100%",height:300,className:"ml-[-30px]",children:(0,s.jsxs)(h.T,{data:a?.trends||[],children:[s.jsx("defs",{children:(0,s.jsxs)("linearGradient",{id:"colorClicks",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),s.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),s.jsx(m.q,{strokeDasharray:"3 3",stroke:"dark"===e?"#374151":"#e5e7eb"}),s.jsx(g.K,{dataKey:"date",stroke:"dark"===e?"#9ca3af":"#6b7280",fontSize:12}),s.jsx(p.B,{stroke:"dark"===e?"#9ca3af":"#6b7280",fontSize:12}),s.jsx(u.u,{contentStyle:{backgroundColor:"dark"===e?"#1f2937":"#ffffff",border:`1px solid ${"dark"===e?"#374151":"#e5e7eb"}`,borderRadius:"8px",color:"dark"===e?"#f3f4f6":"#111827"}}),s.jsx(b.u,{type:"monotone",dataKey:"clicks",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorClicks)",strokeWidth:2})]})}):s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("p",{className:`text-sm ${"dark"===e?"text-gray-400":"text-gray-600"}`,children:"No traffic trend data available"})})}),s.jsx(U.t,{title:"Top Countries",theme:e,children:a?.geographic.topCountries&&a.geographic.topCountries.length>0?s.jsx(x.h,{width:"100%",height:300,children:(0,s.jsxs)(y.u,{children:[s.jsx(j.b,{data:a.geographic.topCountries.filter(e=>e.countryName).map(e=>({name:e.countryName,value:e.count})),cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:e})=>`${e}`,children:a.geographic.topCountries.map((e,t)=>s.jsx(f.b,{fill:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"][t%5]},`cell-${t}`))}),s.jsx(u.u,{contentStyle:{backgroundColor:"dark"===e?"#1f2937":"#ffffff",border:`1px solid ${"dark"===e?"#374151":"#e5e7eb"}`,borderRadius:"8px",color:"dark"===e?"#f3f4f6":"#111827"}}),s.jsx(v.D,{})]})}):s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("p",{className:`text-sm ${"dark"===e?"text-gray-400":"text-gray-600"}`,children:"No geographic data available"})})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a?.topUrls&&a.topUrls.length>0&&s.jsx("div",{className:"lg:col-span-2",children:s.jsx(S,{urls:a?.topUrls||[],theme:e})}),a?.recentActivity&&a.recentActivity.length>0&&s.jsx("div",{children:s.jsx(P,{activities:a?.recentActivity||[],theme:e})})]})]})}},33030:(e,t,a)=>{"use strict";a.d(t,{t:()=>i});var s=a(10326),r=a(16856);let i=({title:e,children:t,theme:a,action:i})=>(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`card p-6 pb-12 ${"dark"===a?"bg-gray-800":"bg-white"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:`text-lg font-semibold ${"dark"===a?"text-white":"text-gray-900"}`,children:e}),i&&s.jsx("div",{children:i})]}),s.jsx("div",{children:t})]})},96489:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(10326),r=a(16856),i=a(17069),l=a(29163);let d=({value:e,prefix:t="",suffix:a="",formatValue:i})=>(0,s.jsxs)(r.E.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,type:"spring",stiffness:100,damping:15},children:[t,i(e),a]},e),n=({title:e,value:t,change:a,icon:n,color:c,theme:o,suffix:x="",prefix:h=""})=>{let m=!!a&&a>=0;return(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`card card-hover p-6 ${"dark"===o?"bg-gray-800":"bg-white"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`p-3 rounded-lg ${{blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",red:"bg-red-500"}[c]}`,children:s.jsx(n,{className:"w-6 h-6 text-white"})}),void 0!==a&&(0,s.jsxs)("div",{className:`flex items-center space-x-1 text-sm ${m?"text-green-500":"text-red-500"}`,children:[m?s.jsx(i.Z,{className:"w-4 h-4"}):s.jsx(l.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{className:"font-medium",children:[m?"+":"",a.toFixed(1),"%"]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:`text-2xl font-bold ${"dark"===o?"text-white":"text-gray-900"} mb-1`,children:s.jsx(d,{value:t,prefix:h,suffix:x,formatValue:e=>"%"===x?e.toFixed(1):e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()})}),s.jsx("p",{className:`text-sm ${"dark"===o?"text-gray-400":"text-gray-600"}`,children:e})]})]})}},55116:(e,t,a)=>{"use strict";a.d(t,{W:()=>r});var s=a(10326);let r=({currentRange:e,onChange:t,theme:a})=>s.jsx("div",{className:`inline-flex rounded-lg border ${"dark"===a?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"} p-1`,children:[{value:"24h",label:"24H"},{value:"7d",label:"7D"},{value:"30d",label:"30D"},{value:"90d",label:"90D"}].map(r=>s.jsx("button",{onClick:()=>t(r.value),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${e===r.value?"bg-blue-600 text-white shadow-sm":"dark"===a?"text-gray-300 hover:text-white hover:bg-gray-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"}`,children:r.label},r.value))})},18415:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l,metadata:()=>i});var s=a(19510);let r=(0,a(68570).createProxy)(String.raw`C:\Users\Ваня\Desktop\snapurl\snap-url-admin\src\app\dashboard\DashboardContent.tsx#default`),i={title:"Dashboard - SnapURL Admin",description:"Monitor your URL performance, track analytics, and manage your shortened links from the comprehensive admin dashboard.",keywords:"dashboard, analytics, URL management, click tracking, performance metrics"};function l(){return s.jsx(r,{})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[35,889,421,649],()=>a(12574));module.exports=s})();