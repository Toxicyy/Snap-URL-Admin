(()=>{var e={};e.id=755,e.ids=[755],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},46934:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>c}),a(39315),a(74614),a(70903);var s=a(23191),r=a(88716),i=a(37922),l=a.n(i),n=a(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let c=["",{children:["real-time",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,39315)),"C:\\Users\\Ваня\\Desktop\\snapurl\\snap-url-admin\\src\\app\\real-time\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,74614)),"C:\\Users\\Ваня\\Desktop\\snapurl\\snap-url-admin\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,70903)),"C:\\Users\\Ваня\\Desktop\\snapurl\\snap-url-admin\\src\\app\\not-found.tsx"]}],o=["C:\\Users\\Ваня\\Desktop\\snapurl\\snap-url-admin\\src\\app\\real-time\\page.tsx"],x="/real-time/page",m={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/real-time/page",pathname:"/real-time",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},72161:(e,t,a)=>{Promise.resolve().then(a.bind(a,39660))},54014:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},94893:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},29163:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},24061:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(76557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},39660:(e,t,a)=>{"use strict";a.d(t,{default:()=>k});var s=a(10326),r=a(17577),i=a(16856),l=a(86462),n=a(87888);let d=(0,a(76557).Z)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);var c=a(94893),o=a(21405),x=a(24061),m=a(20176),h=a(66697),g=a(54014),u=a(98058),p=a(96489),y=a(23016),v=a(18069),j=a(51910),b=a(33030);let k=()=>{let{theme:e}=(0,y.Fg)(),[t,a]=(0,r.useState)(null),[k,f]=(0,r.useState)(!0),[N,w]=(0,r.useState)(null),[$,U]=(0,r.useState)(!0),[C]=(0,r.useState)(60),P=(0,r.useRef)(null),[Z,A]=(0,r.useState)(new Date),{showComingSoon:M}=(0,j.m)(),E=(0,r.useCallback)(async(e=!1)=>{try{e&&f(!0),w(null);let t=await v.ZP.analytics.getRealTime(C);if(t.success&&t.data)a(t.data),A(new Date);else throw Error(t.message||"Failed to fetch real-time data")}catch(e){console.error("Error fetching real-time data:",e),w(e instanceof Error?e.message:"Failed to load real-time data")}finally{f(!1)}},[C]);(0,r.useEffect)(()=>($?P.current=setInterval(()=>{E(!1)},1e4):P.current&&clearInterval(P.current),()=>{P.current&&clearInterval(P.current)}),[$,E]),(0,r.useEffect)(()=>{E(!0)},[E]);let D=()=>{E(!1)},R=e=>{let t=new Date,a=new Date(e),s=Math.floor((t.getTime()-a.getTime())/1e3);return s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:`${Math.floor(s/3600)}h ago`};return k&&!t?s.jsx(u.Z,{title:"Real-time Analytics",description:"Monitor live activity and engagement as it happens",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[void 0,void 0,void 0,void 0].map((e,t)=>s.jsx("div",{className:"card p-6",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-3",children:[s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),s.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded"}),s.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})},t))})}):s.jsx(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,s.jsxs)(u.Z,{title:"Real-time Analytics",description:"Monitor live activity and engagement as it happens",children:[s.jsx(l.M,{children:N&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(n.Z,{className:"w-5 h-5 text-red-500"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm font-medium",children:"Failed to load real-time data"}),s.jsx("p",{className:"text-red-600 dark:text-red-500 text-xs",children:N})]})]}),(0,s.jsxs)("div",{className:"mt-3 flex space-x-3",children:[s.jsx("button",{onClick:D,className:"text-red-600 dark:text-red-400 text-sm hover:text-red-700 dark:hover:text-red-300 underline",children:"Try Again"}),s.jsx("button",{onClick:()=>w(null),className:"text-red-600 dark:text-red-400 text-sm hover:text-red-700 dark:hover:text-red-300 underline",children:"Dismiss"})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(i.E.div,{variants:{initial:{scale:1,opacity:.8},animate:{scale:[1,1.2,1],opacity:[.8,1,.8],transition:{duration:2,repeat:1/0}}},initial:"initial",animate:"animate",className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:`text-sm font-medium ${"dark"===e?"text-gray-300":"text-gray-700"}`,children:$?"Live":"Paused"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`text-sm ${"dark"===e?"text-gray-400":"text-gray-600"}`,children:"Window:"}),(0,s.jsxs)("select",{value:C,onClick:e=>{e.preventDefault(),M()},onMouseDown:e=>e.preventDefault(),onKeyDown:e=>e.preventDefault(),className:"input-base py-1 text-sm",children:[s.jsx("option",{value:5,children:"5 min"}),s.jsx("option",{value:15,children:"15 min"}),s.jsx("option",{value:30,children:"30 min"}),s.jsx("option",{value:60,children:"1 hour"})]})]}),(0,s.jsxs)("span",{className:`text-xs ${"dark"===e?"text-gray-500":"text-gray-400"}`,children:["Updated ",R(Z.toISOString())]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{U(!$)},className:`p-2 rounded-lg border transition-colors ${$?"bg-green-50 border-green-200 text-green-600 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"dark"===e?"border-gray-700 hover:bg-gray-800 text-gray-400":"border-gray-300 hover:bg-gray-50 text-gray-600"}`,title:$?"Pause auto-refresh":"Resume auto-refresh",children:$?s.jsx(d,{className:"w-4 h-4"}):s.jsx(c.Z,{className:"w-4 h-4"})}),s.jsx(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:D,className:`p-2 rounded-lg border transition-colors ${"dark"===e?"border-gray-700 hover:bg-gray-800 text-gray-400":"border-gray-300 hover:bg-gray-50 text-gray-600"}`,title:"Refresh now",children:s.jsx(o.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(p.A,{title:"Live Visitors",value:t?.liveVisitors||0,icon:x.Z,color:"green",theme:e}),s.jsx(p.A,{title:"Recent Clicks",value:t?.statistics?.recentClicks||0,icon:m.Z,color:"blue",theme:e}),s.jsx(p.A,{title:"Active URLs",value:t?.statistics?.activeUrls||0,icon:h.Z,color:"purple",theme:e}),s.jsx(p.A,{title:"Active Countries",value:t?.statistics?.activeCountries||0,icon:g.Z,color:"orange",theme:e})]}),t?.activeUrls&&t.activeUrls.length>0&&s.jsx("div",{className:"mb-8",children:s.jsx(b.t,{title:"Active URLs",theme:e,children:s.jsx("div",{className:"space-y-4",children:t.activeUrls.map((t,a)=>(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`font-medium text-sm truncate ${"dark"===e?"text-white":"text-gray-900"}`,children:t.title||"Untitled"}),s.jsx("p",{className:"text-xs text-blue-500 font-mono",children:t.shortUrl}),(0,s.jsxs)("p",{className:`text-xs ${"dark"===e?"text-gray-500":"text-gray-400"}`,children:["Last click: ",R(t.lastClick)]})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("div",{className:`font-semibold text-sm ${"dark"===e?"text-white":"text-gray-900"}`,children:t.clickCount}),s.jsx("div",{className:`text-xs ${"dark"===e?"text-gray-400":"text-gray-500"}`,children:"clicks"}),(0,s.jsxs)("div",{className:`text-xs ${"dark"===e?"text-gray-400":"text-gray-500"}`,children:[t.uniqueVisitors," unique"]})]})]},t.shortUrl))})})}),s.jsx("div",{className:"mb-8",children:(0,s.jsxs)(b.t,{title:"Real-time Summary",theme:e,children:[!t?.activeUrls?.length&&!k&&(0,s.jsxs)("div",{className:"text-center py-20",children:[s.jsx(h.Z,{className:`w-16 h-16 mx-auto mb-4 ${"dark"===e?"text-gray-600":"text-gray-400"}`}),s.jsx("h3",{className:`text-lg font-medium mb-2 ${"dark"===e?"text-gray-300":"text-gray-700"}`,children:"No Real-time Activity"}),s.jsx("p",{className:`text-sm ${"dark"===e?"text-gray-400":"text-gray-600"}`,children:"Waiting for live activity in the selected time window"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 border-t border-white/20 py-2",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:`text-sm font-medium mb-3 ${"dark"===e?"text-gray-300":"text-gray-700"}`,children:"Activity Window"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:`text-sm ${"dark"===e?"text-gray-400":"text-gray-600"}`,children:"Time Window:"}),s.jsx("span",{className:`text-sm font-medium ${"dark"===e?"text-white":"text-gray-900"}`,children:t?.timeWindow||`${C} minutes`})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:`text-sm ${"dark"===e?"text-gray-400":"text-gray-600"}`,children:"Avg Clicks/Min:"}),s.jsx("span",{className:`text-sm font-medium ${"dark"===e?"text-white":"text-gray-900"}`,children:t?.statistics?.avgClicksPerMinute?.toFixed(1)||"0"})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:`text-sm font-medium mb-3 ${"dark"===e?"text-gray-300":"text-gray-700"}`,children:"Last Updated"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:`text-sm ${"dark"===e?"text-gray-400":"text-gray-600"}`,children:"Server Time:"}),s.jsx("span",{className:`text-sm font-medium ${"dark"===e?"text-white":"text-gray-900"}`,children:t?.lastUpdated?new Date(t.lastUpdated).toLocaleTimeString():"Unknown"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:`text-sm ${"dark"===e?"text-gray-400":"text-gray-600"}`,children:"Status:"}),s.jsx("span",{className:`text-sm font-medium ${$?"text-green-500":"text-orange-500"}`,children:$?"Live":"Paused"})]})]})]})]})]})})]})})}},33030:(e,t,a)=>{"use strict";a.d(t,{t:()=>i});var s=a(10326),r=a(16856);let i=({title:e,children:t,theme:a,action:i})=>(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`card p-6 pb-12 ${"dark"===a?"bg-gray-800":"bg-white"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:`text-lg font-semibold ${"dark"===a?"text-white":"text-gray-900"}`,children:e}),i&&s.jsx("div",{children:i})]}),s.jsx("div",{children:t})]})},96489:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(10326),r=a(16856),i=a(17069),l=a(29163);let n=({value:e,prefix:t="",suffix:a="",formatValue:i})=>(0,s.jsxs)(r.E.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,type:"spring",stiffness:100,damping:15},children:[t,i(e),a]},e),d=({title:e,value:t,change:a,icon:d,color:c,theme:o,suffix:x="",prefix:m=""})=>{let h=!!a&&a>=0;return(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:`card card-hover p-6 ${"dark"===o?"bg-gray-800":"bg-white"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`p-3 rounded-lg ${{blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",red:"bg-red-500"}[c]}`,children:s.jsx(d,{className:"w-6 h-6 text-white"})}),void 0!==a&&(0,s.jsxs)("div",{className:`flex items-center space-x-1 text-sm ${h?"text-green-500":"text-red-500"}`,children:[h?s.jsx(i.Z,{className:"w-4 h-4"}):s.jsx(l.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{className:"font-medium",children:[h?"+":"",a.toFixed(1),"%"]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:`text-2xl font-bold ${"dark"===o?"text-white":"text-gray-900"} mb-1`,children:s.jsx(n,{value:t,prefix:m,suffix:x,formatValue:e=>"%"===x?e.toFixed(1):e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()})}),s.jsx("p",{className:`text-sm ${"dark"===o?"text-gray-400":"text-gray-600"}`,children:e})]})]})}},39315:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l,metadata:()=>i});var s=a(19510);let r=(0,a(68570).createProxy)(String.raw`C:\Users\Ваня\Desktop\snapurl\snap-url-admin\src\app\real-time\RealTimeAnalyticsContent.tsx#default`),i={title:"Real-time Analytics - SnapURL Admin",description:"Monitor live activity, track real-time clicks, and view active users as they interact with your shortened URLs.",keywords:"real-time analytics, live tracking, active users, click monitoring, live dashboard, real-time metrics"};function l(){return s.jsx(r,{})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[35,649],()=>a(46934));module.exports=s})();